(()=>{document.body.style.backgroundImage="url(images/clear.jpg)";const e="f406505da8c169dd39c0d2bbe2b2a93f",t=document.getElementById("cityForm"),n=document.getElementById("weatherData");function a(e){const t=new Date(1e3*e);return new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(t)}t.addEventListener("submit",(async t=>{t.preventDefault();const o=document.getElementById("cityInput").value,r=`https://api.openweathermap.org/data/2.5/weather?q=${o}&appid=${e}`,d=`https://api.openweathermap.org/data/2.5/forecast?q=${o}&cnt=40&appid=${e}`;try{const[e,t]=await Promise.all([fetch(r),fetch(d)]);if(e.ok&&t.ok){const o=await e.json(),r=await t.json(),d=o.main.temp-273.15,c=o.weather[0].description.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),i=document.createElement("h2"),m=document.createElement("p"),l=document.createElement("p");i.textContent=`${o.name}`,m.textContent=`Temperature: ${d.toFixed(1)}Â°C`,l.textContent=c,n.innerHTML="",n.appendChild(i),n.appendChild(m),n.appendChild(l);const p={Thunderstorm:"thunderstorm.jpg",Drizzle:"drizzle.jpg",Rain:"rain.jpg",Snow:"snow.jpg",Clear:"clear.jpg",Clouds:"clouds.jpg"},s=p[o.weather[0].main]||p.Clear;document.body.style.backgroundImage=`url(images/${s})`,function(e){const t=document.getElementById("forecastData");t.innerHTML="",console.log(e);const n={};for(let t=0;t<e.list.length;t++){const o=a(e.list[t].dt);n[o]||(n[o]=[]),n[o].push(e.list[t])}for(const e in n){const a=n[e];let o=a[0].main.temp_min,r=a[0].main.temp_max;for(let e=1;e<a.length;e++){const t=a[e].main.temp_min,n=a[e].main.temp_max;t<o&&(o=t),n>r&&(r=n)}const d=document.createElement("div");d.classList.add("forecastRow");const c=document.createElement("div");c.textContent=e;const i=document.createElement("div");i.textContent={Thunderstorm:"â›ˆï¸",Drizzle:"ğŸŒ§ï¸",Rain:"ğŸŒ§ï¸",Snow:"â„ï¸",Clear:"â˜€ï¸",Clouds:"â˜ï¸"}[a[0].weather[0].main]||"";const m=document.createElement("div");m.textContent=`Min: ${(o-273.15).toFixed(1)}Â°C`;const l=document.createElement("div");l.textContent=`Max: ${(r-273.15).toFixed(1)}Â°C`,d.appendChild(c),d.appendChild(i),d.appendChild(m),d.appendChild(l),t.appendChild(d)}}(r)}else{const e=document.createElement("p");e.textContent=`Error retrieving weather data for ${o}.`,n.innerHTML="",n.appendChild(e)}}catch(e){console.error(e);const t=document.createElement("p");t.textContent=`Error retrieving weather data for ${o}.`,n.innerHTML="",n.appendChild(t)}}))})();
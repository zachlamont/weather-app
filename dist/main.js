(()=>{document.body.style.backgroundImage="url(images/clear.jpg)";const e="f406505da8c169dd39c0d2bbe2b2a93f",t="40",n=document.getElementById("cityForm"),a=document.getElementById("weatherData");let o="Sydney";async function d(){const n=`https://api.openweathermap.org/data/2.5/weather?q=${o}&appid=${e}`,d=`https://api.openweathermap.org/data/2.5/forecast?q=${o}&cnt=${t}&appid=${e}`;try{const[e,t]=await Promise.all([fetch(n),fetch(d)]);if(e.ok&&t.ok){const n=await e.json(),o=await t.json(),d=n.main.temp-273.15,r=n.weather[0].description.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),c=document.createElement("h2"),s=document.createElement("p"),l=document.createElement("p");s.classList.add("temperature"),c.textContent=`${n.name}`,s.textContent=`${d.toFixed(1)}°C`,l.textContent=r,a.innerHTML="",a.appendChild(c),a.appendChild(s),a.appendChild(l);const m={Thunderstorm:"thunderstorm.jpg",Drizzle:"drizzle.jpg",Rain:"rain.jpg",Snow:"snow.jpg",Clear:"clear.jpg",Clouds:"clouds.jpg"},p=m[n.weather[0].main]||m.Clear;document.body.style.backgroundImage=`url(images/${p})`,console.log(`url(images/${p})`),function(e){const t=document.getElementById("forecastData");t.innerHTML="",console.log(e);const n={};for(let t=0;t<e.list.length;t++){const a=i(e.list[t].dt);n[a]||(n[a]=[]),n[a].push(e.list[t])}for(const e in n){const a=n[e];let o=a[0].main.temp_min,d=a[0].main.temp_max;for(let e=1;e<a.length;e++){const t=a[e].main.temp_min,n=a[e].main.temp_max;t<o&&(o=t),n>d&&(d=n)}const i=document.createElement("div");i.classList.add("forecastRow");const r=document.createElement("div");r.classList.add("day-name"),r.textContent=e;const c=document.createElement("div");c.classList.add("table-item"),c.textContent={Thunderstorm:"⛈️",Drizzle:"🌧️",Rain:"🌧️",Snow:"❄️",Clear:"☀️",Clouds:"☁️"}[a[0].weather[0].main]||"";const s=document.createElement("div");s.classList.add("table-item","min"),s.textContent=`${(o-273.15).toFixed(1)}°C`;const l=document.createElement("div");l.classList.add("table-item","max"),l.textContent=`${(d-273.15).toFixed(1)}°C`,i.appendChild(r),i.appendChild(c),i.appendChild(s),i.appendChild(l),t.appendChild(i)}}(o)}else{const e=document.createElement("p");e.textContent=`Error retrieving weather data for ${o}.`,a.innerHTML="",a.appendChild(e)}}catch(e){console.error(e);const t=document.createElement("p");t.textContent=`Error retrieving weather data for ${o}.`,a.innerHTML="",a.appendChild(t)}}function i(e){const t=new Date(1e3*e);return new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(t)}n.addEventListener("submit",(async e=>{e.preventDefault(),o=document.getElementById("cityInput").value,d()})),window.addEventListener("load",(async()=>{d()}))})();